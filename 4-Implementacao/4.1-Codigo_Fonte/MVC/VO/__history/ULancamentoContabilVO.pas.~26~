unit ULancamentoContabilVO;

interface

uses Atributos, Classes, Constantes, Generics.Collections, SysUtils, UGenericVO,
UPlanoContasVO, UContasReceberVO, UContasPagarVO,UhistoricoVO, ULoteVO, UCondominioVO, ULancamentoPadraoVO, UItensLeituraGasVO;

type
  [TEntity]
  [TTable('LancamentoContabil')]
  TLancamentoContabilVO = class(TGenericVO)
  private
    FidLcto : Integer;
    FdtLcto : TDateTime;
    FVlValor : currency;
    FComplemento : String;
    FidContaDebito : Integer;
    FidContaCredito : Integer;
    FidContasReceber : Integer;
    FidContasPagar : Integer;
    FidHistorico : Integer;
    FidLote : Integer;
    FidItensLeituraGas : Integer;
    FidItensRateio : Integer;

    FDsClassificacaoDebito : string;
    FDsClassificacaoCredito : string;
    FDsContaDebito : String;
    FDsContaCredito : String;
    FDsHistorico : String;
    FidBaixa : Integer;

  public

    ContaDebitoVo : TPlanoContasVO;
    ContaCreditoVO : TPlanoContasVO;
    ContasReceberVO : TContasReceberVO;
    ContasPagarVo : TContasPagarVO;
    HistoricoVO : THistoricoVO;
    LoteVO : TLoteVo;
    CondominioVO : TCondominioVO;
    LctoPadraoVo : TLancamentoPadraoVO;
    ItensLeituraGasVO : TItensLeituraGasVO;



    [TId('idLcto')]
    [TGeneratedValue(sAuto)]
    property idLcto : Integer  read FidLcto write FidLcto;

    [TColumn('dtLcto','Data',0,[ldGrid,ldLookup,ldComboBox], False)]
    property dtLcto: TDateTime  read FdtLcto write FdtLcto;

    [TColumn('vlValor','Valor',30,[ldGrid,ldLookup,ldComboBox], False)]
    property VlValor: Currency  read FVlValor write FVlValor;

    [TColumn('dscomplemento','Complemento',80,[ldGrid,ldLookup,ldComboBox], False)]
    property complemento: string  read FComplemento write Fcomplemento;

    [TColumn('idcontacredito','Crédito',0,[ldLookup,ldComboBox], False)]
    property idContaCredito: integer  read FidContaCredito write FidContaCredito;

    [TColumn('idcontadebito','Débito',0,[ldLookup,ldComboBox], False)]
    property idcontadebito: integer  read FidContaDebito write FidContaDebito;

    [TColumn('idcontasreceber','ContasReceber',0,[ldLookup,ldComboBox], False)]
    property idContasReceber: integer  read FidContasReceber write FidContasReceber;

    [TColumn('idcontaspagar','ContasPagar',0,[ldLookup,ldComboBox], False)]
    property idContasPagar: integer  read FidContasPagar write FidContasPagar;

    [TColumn('idlote','idLote',0,[ldLookup,ldComboBox], False)]
    property idLote: integer  read FIdLote write FIdLote;

    [TColumn('idItensLeituragas','idItensLeituragas',0,[ldLookup,ldComboBox], False)]
    property iditensleituragas : integer  read Fiditensleituragas write Fiditensleituragas;

    [TColumn('idItensRateio','idItensLeituragas',0,[ldLookup,ldComboBox], False)]
    property idItensRateio : integer  read FidItensRateio write FidItensRateio;

    [TColumn('idbaixa','idbaixa',0,[ldLookup,ldComboBox], False)]
    property idbaixa: integer  read FidBaixa write FidBaixa;

    [TColumn('idHistorico','idHistorico',0,[ldLookup,ldComboBox], False)]
    property idHistorico: integer  read FIdHistorico write FIdHistorico;

    [TColumn('DSCLASSIFICACAODEBITO','Classificacao',0,[], True, 'PlanoContas', 'idContaDebito', 'idPlanoContas', 'PlanoDebito', 'DSCONTA')]
    property DsClassificacaoDebito : string  read FDsClassificacaoDebito write FDsClassificacaoDebito;

    [TColumn('DSCLASSIFICACAOCREDITO','Classificacao',0,[], True, 'PlanoContas', 'idContaDebito', 'idPlanoContas', 'PlanoDebito', 'DSCONTA')]
    property DsClassificacaoCredito : string  read FDsClassificacaoCredito write FDsClassificacaoCredito;

    [TColumn('DSCONTADEBITO','ContaDebito',0,[], True, 'PlanoContas', 'idContaDebito', 'idPlanoContas', 'PlanoDebito', 'DSCONTA')]
    property DsContaDebito: string  read FDsContaDebito write FDsContaDebito;

    [TColumn('DSCONTACREDITO','ContaCredito',0,[], True, 'PlanoContas', 'idContaCredito', 'idPlanoContas', 'PlanoCredito', 'DSCONTA')]
    property DsContaCredito: string  read FDsContaCredito write FDsContaCredito;

    [TColumn('DSHISTORICO','',0,[], True, 'Historicos', 'idHistorico', 'idHistorico')]
    property DsHistorico: string  read FDsHistorico write FDsHistorico;

    procedure ValidarCamposObrigatorios;

  end;
implementation



{ TLancamentoContabilVO }

procedure TLancamentoContabilVO.ValidarCamposObrigatorios;
begin
  if (self.FDtLcto = 0) then
  begin
    raise Exception.Create('O campo Data é obrigatório!');
  end;
  if ((self.FidContaDebito = 0) and (self.idContaCredito = 0))then
  begin
      raise Exception.Create('O campo Conta débito ou conta crédito  é obrigatório!');
  end;
  if (Self.FidHistorico = 0) then
  begin
    raise Exception.Create('O campo Histórico é obrigatório!');
  end;
  if (Self.FVlValor <= 0) then
  begin
     raise Exception.Create('O campo Valor é obrigatório!');
  end;
end;

end.

